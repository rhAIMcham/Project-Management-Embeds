<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Acknowledging your strengths</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
<style>
.txta {
    width: 100%;
    font-family: Arial, sans-serif;
    overflow: hidden;
    line-height: 1.4;
}

:root {
    --AIMblue: #4353A3;
    --darkBlue: #38416D;
    --teal: #5DC8B9;
    --cream: #F1EEDE;
    --grey: #e7e9ec;
    --rust: #AF4510;
    --navy: #12195C;
    --white: #ffffff;
    --lightBlue: #AEBAE4;
}

input {
    border: none;
    width: fit-content;

}

body {
    font-family: "IBM Plex Sans", sans-serif;
}

table {
    width: 100%;
    margin:0;
    padding:0;
    border-collapse: collapse;
    border-spacing: 0;
    text-align: left;
}

table tr {
    border: 1px solid var(--AIMblue);
    padding: 5px;
}

table th, table td {
    border: 1px solid var(--AIMblue);
    padding: 10px;
}

table th {
    font-size: 16px;
    font-weight: bold;
    letter-spacing: 1px;
    background-color: var(--darkBlue);
    color: var(--white);
}

tr:nth-child(even) {
    background-color: var(--grey); /*Grey of torment!*/
} 

tr:nth-child(odd) {
    background-color: white; 
} 

tr td:first-child {
    font-weight: bold;
}

.extreme {
    background-color: red;
    color: white;
}

.high {
    background-color: orange;
}

.medium {
     background-color: yellow;
}

.low {
     background-color: rgb(98, 192, 79);
}
 @media screen and (max-width: 900px) {

table {
    border: 0;
    border: none;
}

table thead {
    display: none;
}

table tr {
    margin-bottom: 10px;
    display: block;
    border-bottom: 2px solid var(--AIMblue);
    border-left: 1px solid var(--lightBlue);
    border-right: 1px solid var(--lightBlue);
    border-top: 1px solid var(--lightBlue);
}

table td {
    display: block;
    text-align: right;
    font-size: 13px;
    border-bottom: 1px dotted var(--rust);
    border-left: 0px dotted #ccc;
    border-right: 0px dotted #ccc;
    border-top: 0px dotted #ccc;
}

table td:last-child {
    border-bottom: 0;
}

table td:before {
    content: attr(data-label);
    float: left;
    font-weight: bold;
}
}

</style>
  </head>
<body>
<table>
<colgroup>
        <col style="width: 10%;">
        <col style="width: 10%;">
        <col style="width: 7%;">
        <col style="width: 7%;">
        <col style="width: 16%;">
        <col style="width: 50%;">
      </colgroup>
  <thead>
    <th>Risk description</th>
    <th>Risk category</th>
    <th>Likelihood</th>
    <th>Impact</th>
    <th>Risk owner</th>
    <th>Risk response plan</th>
  </thead>
  <tbody>
    <tr>
        <td data-label="Risk description">
            <textarea placeholder="Briefly describe the risk" class="txta"></textarea>
        </td>
        <td data-label="Risk category">
        <label for="Risk category"></label>
            <select id="Risk category" name="Risk category">
                <option value="Technical">Technical</option>
                <option value="Resource">Resource</option>
                <option value="Financial">Financial</option>
                <option value="Schedule">Schedule</option>
                <option value="Stakeholder">Stakeholder</option>
                <option value="External">External</option>
                <option value="Operational">Operational</option>
            </select>
        </td>
        <td id="likelihoodTD" data-label="Likelihood">
        <label for="likelihood"></label>
            <select id="likelihood" name="likelihood">
                <option value="low">Low</option>
                <option value="medium">Medium</option>
                <option value="high">High</option>
                <option value="extreme">Extreme</option>
            </select>
        </td>
        <td  id="impactTD" data-label="Impact">
        <label for="Impact"></label>
            <select id="Impact" name="Impact">
                <option value="low">Low</option>
                <option value="medium">Medium</option>
                <option value="high">High</option>
                <option value="extreme">Extreme</option>
            </select>
        </td>
        <td data-label="Risk owner">
            <textarea placeholder="Enter the central risk owner here" class="txta"></textarea>
        </td>
        <td data-label="Risk response plan">
            <textarea placeholder="Briefly explain the plans to address this risk" class="txta"></textarea>
        </td>
    </tr>
  </tbody>
</table>
</body>
<script>
  // Targets all textareas with class "txta"
let textareas = document.querySelectorAll('.txta'),
    hiddenDiv = document.createElement('div'),
    content = null;

// Adds a class to all textareas
for (let j of textareas) {
  j.classList.add('txtstuff');
}

// Build the hidden div's attributes

// The line below is needed if you move the style lines to CSS
// hiddenDiv.classList.add('hiddendiv');

// Add the "txta" styles, which are common to both textarea and hiddendiv
// If you want, you can remove those from CSS and add them via JS
hiddenDiv.classList.add('txta');

// Add the styles for the hidden div
// These can be in the CSS, just remove these three lines and uncomment the CSS
hiddenDiv.style.display = 'none';
hiddenDiv.style.whiteSpace = 'pre-wrap';
hiddenDiv.style.wordWrap = 'break-word';

// Loop through all the textareas and add the event listener
for(let i of textareas) {
  (function(i) {
    // Note: Use 'keyup' instead of 'input'
    // if you want older IE support
    i.addEventListener('input', function() {
      
      // Append hiddendiv to parent of textarea, so the size is correct
      i.parentNode.appendChild(hiddenDiv);
      
      // Remove this if you want the user to be able to resize it in modern browsers
      i.style.resize = 'none';
      
            // This removes scrollbars
      i.style.overflow = 'hidden';
     
      // Every input/change, grab the content
      content = i.value;

      // Add the same content to the hidden div
      
      // This is for old IE
      content = content.replace(/\n/g, '<br>');
      
      // The <br ..> part is for old IE
      // This also fixes the jumpy way the textarea grows if line-height isn't included
      hiddenDiv.innerHTML = content + '<br style="line-height: 3px;">';

      // Briefly make the hidden div block but invisible
      // This is in order to read the height
      hiddenDiv.style.visibility = 'hidden';
      hiddenDiv.style.display = 'block';
      i.style.height = hiddenDiv.offsetHeight + 'px';

      // Make the hidden div display:none again
      hiddenDiv.style.visibility = 'visible';
      hiddenDiv.style.display = 'none';
    });
  })(i);
}

// Apply classes to selects based on selection and add listeners
document.addEventListener('DOMContentLoaded', function() {
  const validClasses = ['low','medium','high','extreme'];

  // helper to clear/add risk classes on an element
  function setRiskClassOn(el, cls) {
    if (!el) return;
    el.classList.remove(...validClasses);
    if (cls && validClasses.includes(cls)) el.classList.add(cls);
  }

  // apply the select's value as a class to the select and its containing TD
  function updateFromSelect(selectEl) {
    if (!selectEl) return;
    const val = (selectEl.value || '').toLowerCase();
    // apply to the select itself (if desired)
    setRiskClassOn(selectEl, val);
    // apply to the containing td (closest)
    const td = selectEl.closest('td');
    if (td) setRiskClassOn(td, val);
  }

  const likelihood = document.getElementById('likelihood');
  const likelihoodTD = document.getElementById('likelihoodTD');
  const impact = document.getElementById('Impact');
  const impactTD = document.getElementById('impactTD');

  if (likelihood) {
    likelihood.addEventListener('input', () => updateFromSelect(likelihood));
    likelihood.addEventListener('change', () => updateFromSelect(likelihood));
    // initialize cell and select class
    updateFromSelect(likelihood);
    // ensure TD has no leftover classes if select missing value
    if (likelihoodTD && !likelihood) setRiskClassOn(likelihoodTD, '');
  }

  if (impact) {
    impact.addEventListener('input', () => updateFromSelect(impact));
    impact.addEventListener('change', () => updateFromSelect(impact));
    // initialize
    updateFromSelect(impact);
    if (impactTD && !impact) setRiskClassOn(likeliimpactTDhoodTD, '');
  }
});
</script>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
  <title>Work Breakdown Structure</title>
  <style>
    :root {
        --AIMblue: #4353A3;
        --darkBlue: #38416D;
        --teal: #5DC8B9;
        --cream: #F1EEDE;
        --grey: #e7e9ec;
        --rust: #AF4510;
        --navy: #12195C;
        --white: #ffffff;
        --lightBlue: #AEBAE4;
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "IBM Plex Sans", sans-serif;
      min-height: 90vh;
      padding: 40px 20px;
      background-color: var(--cream);
    }

    .container {
      max-width: 1600px;
      margin: 0 auto;
    }

    h1 {
      color: var(--darkBlue);
      text-align: center;
      margin-bottom: 40px;
      font-size: 2.5em;
    }

    .main-layout {
      display: flex;
      gap: 30px;
    }

    .sidebar {
      width: 300px;
      flex-shrink: 0;
    }

    .source-items {
      background: var(--white);
      border: 2px solid var(--AIMblue);
      border-radius: 12px;
      padding: 20px;
      position: sticky;
      top: 20px;
    }

    .source-title {
      font-size: 1.3em;
      font-weight: bold;
      color: var(--AIMblue);
      margin-bottom: 20px;
      text-align: center;
      padding-bottom: 10px;
      border-bottom: 2px solid var(--AIMblue);
    }

    .source-section {
      margin-bottom: 25px;
    }

    .source-section:last-child {
      margin-bottom: 0;
    }

    .source-section-title {
      font-weight: 600;
      color: var(--darkBlue);
      margin-bottom: 12px;
      font-size: 0.95em;
    }

    .wbs-area {
      flex: 1;
    }

    .project-title {
      text-align: center;
      color: var(--white);
      background: var(--darkBlue);
      padding: 25px;
      border-radius: 12px;
      margin-bottom: 30px;
      font-size: 1.8em;
      font-weight: 600;
    }

    .wbs-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }

    .wbs-column {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .wbs-box {
      background: var(--white);
      border: 2px solid var(--darkBlue);
      border-radius: 8px;
      padding: 15px;
      min-height: 70px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .wbs-box.level-2 {
      background: var(--lightBlue);
      color: var(--darkBlue);
      font-weight: 600;
      font-size: 1.05em;
    }

    .level-3-container {
      background: var(--white);
      border: 2px solid var(--teal);
      border-radius: 8px;
      padding: 15px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .level-3-slot {
      display: flex;
      align-items: center;
      gap: 10px;
      min-height: 50px;
      padding: 10px;
      background: var(--cream);
      border-radius: 6px;
    }

    .level-3-number {
      font-weight: 600;
      color: var(--darkBlue);
      font-size: 0.95em;
      min-width: 30px;
    }

    .level-3-drop-zone {
      flex: 1;
      background: var(--grey);
      border: 2px dashed var(--lightBlue);
      border-radius: 6px;
      padding: 12px;
      min-height: 45px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      color: #999;
      font-style: italic;
      font-size: 0.85em;
    }

    .level-3-drop-zone.drag-over {
      background: #e6f2ff;
      border-color: var(--AIMblue);
      border-style: solid;
    }

    .level-3-drop-zone.filled {
      background: var(--white);
      border: none;
      color: var(--darkBlue);
      font-style: normal;
      padding: 8px 12px;
    }

    .level-3-task {
      background: var(--white);
      border: 2px solid var(--teal);
      border-radius: 8px;
      padding: 12px;
      font-size: 0.9em;
      cursor: move;
      transition: all 0.3s ease;
      margin-bottom: 10px;
    }

    .level-3-task:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }

    .level-3-task.dragging {
      opacity: 0.5;
      transform: scale(0.95);
    }

    .draggable-item {
      cursor: move;
      transition: all 0.3s ease;
      margin-bottom: 10px;
    }

    .draggable-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }

    .draggable-item.dragging {
      opacity: 0.5;
      transform: scale(0.95);
    }

    .drop-zone {
      background: var(--grey);
      border: 2px dashed var(--lightBlue);
      border-radius: 8px;
      padding: 15px;
      min-height: 80px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: #999;
      font-style: italic;
    }

    .drop-zone.drag-over {
      background: #e6f2ff;
      border-color: var(--AIMblue);
      border-style: solid;
      transform: scale(1.02);
    }

    .drop-zone.filled {
      padding: 0;
      background: transparent;
      border: none;
      min-height: auto;
    }

    .owner-section {
      margin-top: 15px;
      padding-top: 15px;
      border-top: 2px solid var(--cream);
    }

    .owner-input {
      padding: 10px;
      border: 1px solid var(--lightBlue);
      border-radius: 4px;
      font-family: "IBM Plex Sans", sans-serif;
      font-size: 0.9em;
      width: 100%;
    }

    .owner-input:focus {
      outline: none;
      border-color: var(--AIMblue);
    }

    .owner-label {
      font-size: 0.85em;
      color: var(--darkBlue);
      font-weight: 600;
      margin-bottom: 8px;
    }

    .example-badge {
      display: inline-block;
      background: var(--rust);
      color: var(--white);
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.7em;
      font-weight: 600;
      margin-left: 8px;
    }

    .instructions {
      background: var(--lightBlue);
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      font-size: 0.9em;
      color: var(--darkBlue);
    }

    .submit-button {
      background: var(--AIMblue);
      color: var(--white);
      border: none;
      padding: 15px 40px;
      font-size: 1.1em;
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
      font-family: "IBM Plex Sans", sans-serif;
      transition: all 0.3s ease;
      display: block;
      margin: 30px auto;
    }

    .submit-button:hover {
      background: var(--darkBlue);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.2);
    }

    .submit-button:disabled {
      background: var(--grey);
      cursor: not-allowed;
      transform: none;
    }

    .show-answers-button {
      background: var(--teal);
      color: var(--darkBlue);
      border: none;
      padding: 15px 40px;
      font-size: 1.1em;
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
      font-family: "IBM Plex Sans", sans-serif;
      transition: all 0.3s ease;
      display: none;
      margin: 0;
    }

    .show-answers-button.visible {
      display: block;
    }

    .show-answers-button:hover {
      background: var(--darkBlue);
      color: var(--white);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.2);
    }

    .feedback-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .feedback-overlay.active {
      display: flex;
    }

    .feedback-modal {
      background: var(--white);
      border-radius: 12px;
      padding: 30px;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 10px 40px rgba(0,0,0,0.3);
    }

    .feedback-title {
      font-size: 1.8em;
      color: var(--darkBlue);
      margin-bottom: 20px;
      text-align: center;
    }

    .feedback-score {
      font-size: 2em;
      font-weight: bold;
      text-align: center;
      margin-bottom: 20px;
      color: var(--AIMblue);
    }

    .feedback-item {
      margin-bottom: 15px;
      padding: 15px;
      border-radius: 8px;
      border-left: 4px solid;
    }

    .feedback-item.correct {
      background: #e8f5e9;
      border-color: #4caf50;
    }

    .feedback-item.incorrect {
      background: #ffebee;
      border-color: #f44336;
    }

    .feedback-item-title {
      font-weight: 600;
      margin-bottom: 5px;
    }

    .feedback-item-detail {
      font-size: 0.9em;
      color: #555;
    }

    .close-button {
      background: var(--AIMblue);
      color: var(--white);
      border: none;
      padding: 12px 30px;
      font-size: 1em;
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
      font-family: "IBM Plex Sans", sans-serif;
      display: block;
      margin: 20px auto 0;
    }

    .close-button:hover {
      background: var(--darkBlue);
    }

    .level-3-drop-zone.correct,
    .drop-zone.correct {
      border: 2px solid #4caf50;
      background: #e8f5e9;
      position: relative;
    }

    .level-3-drop-zone.incorrect,
    .drop-zone.incorrect {
      border: 2px solid #f44336;
      background: #ffebee;
      position: relative;
    }

    .level-3-drop-zone.revealed,
    .drop-zone.revealed {
      border: 2px solid var(--darkBlue);
      background: var(--white);
      position: relative;
    }

    .owner-input.correct {
      border: 2px solid #4caf50;
      background: #e8f5e9;
    }

    .owner-input.incorrect {
      border: 2px solid #f44336;
      background: #ffebee;
    }

    .owner-input.revealed {
      border: 2px solid var(--darkBlue);
      background: var(--white);
    }

    .feedback-icon {
      position: absolute;
      top: 5px;
      right: 5px;
      font-size: 1.5em;
      font-weight: bold;
      z-index: 10;
    }

    .feedback-icon.correct {
      color: #4caf50;
    }

    .feedback-icon.revealed {
      color: var(--darkBlue);
    }

    .score-banner {
      background: var(--AIMblue);
      color: var(--white);
      padding: 20px;
      border-radius: 8px;
      text-align: center;
      font-size: 1.3em;
      font-weight: 600;
      margin: 20px 0;
      display: none;
    }

    .score-banner.show {
      display: block;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Work Breakdown Structure Builder</h1>
    
    <div class="main-layout">
      <!-- Sidebar with draggable items -->
      <div class="sidebar">
        <div class="source-items">
          <div class="source-title">Draggable Items</div>
          
          <div class="source-section">
            <div class="source-section-title">Level 2 Phases</div>
            <div class="wbs-box level-2 draggable-item" draggable="true" data-level="2">
              Planning
            </div>
            <div class="wbs-box level-2 draggable-item" draggable="true" data-level="2">
              Design
            </div>
                        <div class="wbs-box level-2 draggable-item" draggable="true" data-level="2">
              Project Initiation
            </div>
          </div>

          <div class="source-section">
            <div class="source-section-title">Level 3 Tasks</div>
            
             <div class="level-3-task draggable-item" draggable="true" data-level="3">
                Create wireframes
                </div>
                <div class="level-3-task draggable-item" draggable="true" data-level="3">
                Develop project plan
                </div>
                    <div class="level-3-task draggable-item" draggable="true" data-level="3">
                Design UI/UX
                </div>
                <div class="level-3-task draggable-item" draggable="true" data-level="3">
                Define project scope
                </div>
                <div class="level-3-task draggable-item" draggable="true" data-level="3">
                Create schedule
                </div>
                <div class="level-3-task draggable-item" draggable="true" data-level="3">
                Approve design
                </div>
                <div class="level-3-task draggable-item" draggable="true" data-level="3">
                Define requirements
                </div>
                <div class="level-3-task draggable-item" draggable="true" data-level="3">
                Create project charter
                </div>
                <div class="level-3-task draggable-item" draggable="true" data-level="3">
                Identify stakeholders
                </div>           
                <div class="level-3-task draggable-item" draggable="true" data-level="3">
                Resource planning
                </div>
          </div>
        </div>
      </div>

      <!-- Main WBS area -->
      <div class="wbs-area">
        <div class="project-title">Project: Website Development</div>

        <div class="instructions">
          <strong>Instructions:</strong> Drag Level 2 phases to the top row, then drag Level 3 tasks to match their numbered slots. Fill in the work package owner at the bottom of each column.
        </div>

        <div style="display: flex; gap: 20px; justify-content: center; margin: 30px 0;">
          <button class="submit-button" style="margin: 0;" onclick="checkAnswers()">Submit Answers</button>
          <button class="show-answers-button" id="showAnswersBtn" onclick="showCorrectAnswers()">Show Answers</button>
          <button class="submit-button" style="margin: 0; background: var(--rust);" onclick="resetForm()">Reset</button>
        </div>

        <div class="score-banner" id="scoreBanner"></div>

        <div class="wbs-grid">
          <!-- Column 1 -->
          <div class="wbs-column">
            <div class="drop-zone level-2-zone" data-level="2">Drop Level 2 here</div>
            <div class="level-3-container">
              <div class="level-3-slot">
                <div class="level-3-number">1.1</div>
                <div class="level-3-drop-zone" data-level="3">Drop task here</div>
              </div>
              <div class="level-3-slot">
                <div class="level-3-number">1.2</div>
                <div class="level-3-drop-zone" data-level="3">Drop task here</div>
              </div>
              <div class="level-3-slot">
                <div class="level-3-number">1.3</div>
                <div class="level-3-drop-zone" data-level="3">Drop task here</div>
              </div>
              <div class="owner-section">
                <div class="owner-label">Work Package Owner:</div>
                <input type="text" class="owner-input" placeholder="e.g., Project Manager">
              </div>
            </div>
          </div>

          <!-- Column 2 -->
          <div class="wbs-column">
            <div class="drop-zone level-2-zone" data-level="2">Drop Level 2 here</div>
            <div class="level-3-container">
              <div class="level-3-slot">
                <div class="level-3-number">2.1</div>
                <div class="level-3-drop-zone" data-level="3">Drop task here</div>
              </div>
              <div class="level-3-slot">
                <div class="level-3-number">2.2</div>
                <div class="level-3-drop-zone" data-level="3">Drop task here</div>
              </div>
              <div class="level-3-slot">
                <div class="level-3-number">2.3</div>
                <div class="level-3-drop-zone" data-level="3">Drop task here</div>
              </div>
              <div class="level-3-slot">
                <div class="level-3-number">2.4</div>
                <div class="level-3-drop-zone" data-level="3">Drop task here</div>
              </div>
              <div class="owner-section">
                <div class="owner-label">Work Package Owner:</div>
                <input type="text" class="owner-input" placeholder="e.g., Project Manager">
              </div>
            </div>
          </div>

          <!-- Column 3 -->
          <div class="wbs-column">
            <div class="drop-zone level-2-zone" data-level="2">Drop Level 2 here</div>
            <div class="level-3-container">
              <div class="level-3-slot">
                <div class="level-3-number">3.1</div>
                <div class="level-3-drop-zone" data-level="3">Drop task here</div>
              </div>
              <div class="level-3-slot">
                <div class="level-3-number">3.2</div>
                <div class="level-3-drop-zone" data-level="3">Drop task here</div>
              </div>
              <div class="level-3-slot">
                <div class="level-3-number">3.3</div>
                <div class="level-3-drop-zone" data-level="3">Drop task here</div>
              </div>
              <div class="owner-section">
                <div class="owner-label">Work Package Owner:</div>
                <input type="text" class="owner-input" placeholder="e.g., Design Lead">
              </div>
            </div>
          </div>

          <!-- Column 4 - Example -->
          <div class="wbs-column">
            <div class="wbs-box level-2">
              Development <span class="example-badge">EXAMPLE</span>
            </div>
            <div class="level-3-container">
              <div class="level-3-slot">
                <div class="level-3-number">4.1</div>
                <div class="level-3-drop-zone filled">Set up development environment</div>
              </div>
              <div class="level-3-slot">
                <div class="level-3-number">4.2</div>
                <div class="level-3-drop-zone filled">Front-end development</div>
              </div>
              <div class="level-3-slot">
                <div class="level-3-number">4.3</div>
                <div class="level-3-drop-zone filled">Back-end development</div>
              </div>
              <div class="level-3-slot">
                <div class="level-3-number">4.4</div>
                <div class="level-3-drop-zone filled">Database integration</div>
              </div>
              <div class="owner-section">
                <div class="owner-label">Work Package Owner:</div>
                <input type="text" class="owner-input" value="Dev Team Lead">
              </div>
            </div>
          </div>

          <!-- Column 5 - Example -->
          <div class="wbs-column">
            <div class="wbs-box level-2">
              Testing <span class="example-badge">EXAMPLE</span>
            </div>
            <div class="level-3-container">
              <div class="level-3-slot">
                <div class="level-3-number">5.1</div>
                <div class="level-3-drop-zone filled">Write test cases</div>
              </div>
              <div class="level-3-slot">
                <div class="level-3-number">5.2</div>
                <div class="level-3-drop-zone filled">Perform functional testing</div>
              </div>
              <div class="level-3-slot">
                <div class="level-3-number">5.3</div>
                <div class="level-3-drop-zone filled">Bug fixing</div>
              </div>
              <div class="level-3-slot">
                <div class="level-3-number">5.4</div>
                <div class="level-3-drop-zone filled">User acceptance testing</div>
              </div>
              <div class="owner-section">
                <div class="owner-label">Work Package Owner:</div>
                <input type="text" class="owner-input" value="QA Lead">
              </div>
            </div>
          </div>

          <!-- Column 6 - Example -->
          <div class="wbs-column">
            <div class="wbs-box level-2">
              Deployment <span class="example-badge">EXAMPLE</span>
            </div>
            <div class="level-3-container">
              <div class="level-3-slot">
                <div class="level-3-number">6.1</div>
                <div class="level-3-drop-zone filled">Set up hosting</div>
              </div>
              <div class="level-3-slot">
                <div class="level-3-number">6.2</div>
                <div class="level-3-drop-zone filled">Deploy to production</div>
              </div>
              <div class="level-3-slot">
                <div class="level-3-number">6.3</div>
                <div class="level-3-drop-zone filled">Final testing</div>
              </div>
              <div class="owner-section">
                <div class="owner-label">Work Package Owner:</div>
                <input type="text" class="owner-input" value="DevOps Engineer">
              </div>
            </div>
          </div>

          <!-- Column 7 - Example -->
          <div class="wbs-column">
            <div class="wbs-box level-2">
              Maintenance <span class="example-badge">EXAMPLE</span>
            </div>
            <div class="level-3-container">
              <div class="level-3-slot">
                <div class="level-3-number">7.1</div>
                <div class="level-3-drop-zone filled">Monitor performance</div>
              </div>
              <div class="level-3-slot">
                <div class="level-3-number">7.2</div>
                <div class="level-3-drop-zone filled">Fix post-launch bugs</div>
              </div>
              <div class="level-3-slot">
                <div class="level-3-number">7.3</div>
                <div class="level-3-drop-zone filled">Provide support</div>
              </div>
              <div class="owner-section">
                <div class="owner-label">Work Package Owner:</div>
                <input type="text" class="owner-input" value="Support Team">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Feedback Modal -->
    <div class="feedback-overlay" id="feedbackOverlay">
      <div class="feedback-modal">
        <div class="feedback-title">Your Results</div>
        <div class="feedback-score" id="feedbackScore"></div>
        <div id="feedbackContent"></div>
        <button class="close-button" onclick="closeFeedback()">Close</button>
      </div>
    </div>
  </div>

  <script>
    let draggedItem = null;

    // Correct answers mapping
    const correctAnswers = {
      level2: {
        'col1': 'Project Initiation',
        'col2': 'Planning',
        'col3': 'Design'
      },
      level3Groups: {
        'Project Initiation': ['Define project scope', 'Identify stakeholders', 'Create project charter'],
        'Planning': ['Develop project plan', 'Define requirements', 'Create schedule', 'Resource planning'],
        'Design': ['Create wireframes', 'Design UI/UX', 'Approve design']
      },
      owners: {
        'Project Initiation': ['Project Manager', 'PM', 'Program Manager'],
        'Planning': ['Project Manager', 'PM', 'Program Manager', 'Planning Lead'],
        'Design': ['Design Lead', 'Designer', 'UX Lead', 'UI/UX Designer']
      }
    };

    function checkAnswers() {
      let totalQuestions = 0;
      let correctCount = 0;

      // Get all columns (first 3 only - not examples)
      const columns = document.querySelectorAll('.wbs-column');
      
      // Check first 3 columns
      for (let i = 0; i < 3; i++) {
        const column = columns[i];
        const colId = `col${i + 1}`;
        
        // Check Level 2
        const level2Zone = column.querySelector('.drop-zone.level-2-zone');
        const level2Text = level2Zone.textContent.trim();
        totalQuestions++;
        
        if (level2Text === correctAnswers.level2[colId]) {
          correctCount++;
          level2Zone.classList.add('correct');
          level2Zone.classList.remove('incorrect');
          addFeedbackIcon(level2Zone, true);
        } else {
          level2Zone.classList.add('incorrect');
          level2Zone.classList.remove('correct');
          addFeedbackIcon(level2Zone, false);
        }

        // Get the phase name for this column to check tasks against
        const phaseName = level2Text;
        const correctTasksForPhase = correctAnswers.level3Groups[phaseName] || [];

        // Check Level 3 tasks
        const level3Zones = column.querySelectorAll('.level-3-drop-zone');
        level3Zones.forEach(zone => {
          const taskText = zone.textContent.trim();
          totalQuestions++;
          
          if (taskText === 'Drop task here' || !taskText) {
            zone.classList.add('incorrect');
            zone.classList.remove('correct');
            addFeedbackIcon(zone, false);
          } else if (correctTasksForPhase.includes(taskText)) {
            correctCount++;
            zone.classList.add('correct');
            zone.classList.remove('incorrect');
            addFeedbackIcon(zone, true);
          } else {
            zone.classList.add('incorrect');
            zone.classList.remove('correct');
            addFeedbackIcon(zone, false);
          }
        });

        // Check Owner input
        const ownerInput = column.querySelector('.owner-input');
        const ownerValue = ownerInput.value.trim();
        totalQuestions++;
        
        const acceptableAnswers = correctAnswers.owners[phaseName] || [];
        const isOwnerCorrect = acceptableAnswers.some(ans => 
          ownerValue.toLowerCase() === ans.toLowerCase()
        );
        
        if (ownerValue === '') {
          ownerInput.classList.add('incorrect');
          ownerInput.classList.remove('correct');
        } else if (isOwnerCorrect) {
          correctCount++;
          ownerInput.classList.add('correct');
          ownerInput.classList.remove('incorrect');
        } else {
          ownerInput.classList.add('incorrect');
          ownerInput.classList.remove('correct');
        }
      }

      // Display score banner
      const percentage = Math.round((correctCount / totalQuestions) * 100);
      const scoreBanner = document.getElementById('scoreBanner');
      scoreBanner.textContent = `Score: ${correctCount} / ${totalQuestions} correct (${percentage}%)`;
      scoreBanner.classList.add('show');
      
      // Show the "Show Answers" button
      document.getElementById('showAnswersBtn').classList.add('visible');
      
      // Scroll to top to see the score
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function addFeedbackIcon(element, isCorrect) {
      // Remove any existing feedback icon
      const existingIcon = element.querySelector('.feedback-icon');
      if (existingIcon) {
        existingIcon.remove();
      }
      
      // Add new feedback icon
      const icon = document.createElement('span');
      icon.className = `feedback-icon ${isCorrect ? 'correct' : 'incorrect'}`;
      icon.textContent = isCorrect ? '✓' : '✗';
      element.style.position = 'relative';
      element.appendChild(icon);
    }

    function showCorrectAnswers() {
      const columns = document.querySelectorAll('.wbs-column');
      
      // Fill in correct answers for first 3 columns
      for (let i = 0; i < 3; i++) {
        const column = columns[i];
        const colId = `col${i + 1}`;
        
        // Check Level 2 - only fill if incorrect or empty
        const level2Zone = column.querySelector('.drop-zone.level-2-zone');
        if (level2Zone.classList.contains('incorrect') || !level2Zone.classList.contains('filled')) {
          const correctPhase = correctAnswers.level2[colId];
          level2Zone.innerHTML = correctPhase;
          level2Zone.classList.add('filled', 'revealed');
          level2Zone.classList.remove('incorrect', 'correct');
          addRevealedIcon(level2Zone);
        }
        
        const correctPhase = correctAnswers.level2[colId];
        const correctTasks = correctAnswers.level3Groups[correctPhase];
        
        // Check Level 3 tasks - only fill incorrect or empty ones
        const level3Zones = column.querySelectorAll('.level-3-drop-zone');
        let taskIndex = 0;
        level3Zones.forEach(zone => {
          if (zone.classList.contains('incorrect') || !zone.classList.contains('filled')) {
            if (taskIndex < correctTasks.length) {
              zone.textContent = correctTasks[taskIndex];
              zone.classList.add('filled', 'revealed');
              zone.classList.remove('incorrect', 'correct');
              addRevealedIcon(zone);
            }
          }
          taskIndex++;
        });
        
        // Check Owner input - only fill if incorrect or empty
        const ownerInput = column.querySelector('.owner-input');
        if (ownerInput.classList.contains('incorrect') || ownerInput.value.trim() === '') {
          const correctOwner = correctAnswers.owners[correctPhase][0]; // Use first acceptable answer
          ownerInput.value = correctOwner;
          ownerInput.classList.add('revealed');
          ownerInput.classList.remove('incorrect', 'correct');
        }
      }
    }

    function addRevealedIcon(element) {
      // Remove any existing feedback icon
      const existingIcon = element.querySelector('.feedback-icon');
      if (existingIcon) {
        existingIcon.remove();
      }
      
      // Add revealed icon (info symbol)
      const icon = document.createElement('span');
      icon.className = 'feedback-icon revealed';
      icon.textContent = 'ℹ';
      element.style.position = 'relative';
      element.appendChild(icon);
    }

    function displayFeedback(correct, total, feedbackItems) {
      const percentage = Math.round((correct / total) * 100);
      const score = `${correct} / ${total} correct (${percentage}%)`;
      
      document.getElementById('feedbackScore').textContent = score;
      
      const feedbackContent = document.getElementById('feedbackContent');
      feedbackContent.innerHTML = '';
      
      feedbackItems.forEach(item => {
        const div = document.createElement('div');
        div.className = `feedback-item ${item.correct ? 'correct' : 'incorrect'}`;
        div.innerHTML = `
          <div class="feedback-item-title">${item.title}</div>
          <div class="feedback-item-detail">${item.detail}</div>
        `;
        feedbackContent.appendChild(div);
      });
      
      document.getElementById('feedbackOverlay').classList.add('active');
    }

    function closeFeedback() {
      document.getElementById('feedbackOverlay').classList.remove('active');
      
      // Remove visual feedback classes
      document.querySelectorAll('.correct, .incorrect').forEach(el => {
        el.classList.remove('correct', 'incorrect');
      });
      
      // Remove feedback icons
      document.querySelectorAll('.feedback-icon').forEach(icon => {
        icon.remove();
      });
      
      // Hide score banner
      document.getElementById('scoreBanner').classList.remove('show');
    }

    function resetForm() {
      // Remove all feedback first
      document.querySelectorAll('.correct, .incorrect').forEach(el => {
        el.classList.remove('correct', 'incorrect');
      });
      
      // Remove feedback icons
      document.querySelectorAll('.feedback-icon').forEach(icon => {
        icon.remove();
      });
      
      // Hide score banner and show answers button
      document.getElementById('scoreBanner').classList.remove('show');
      document.getElementById('showAnswersBtn').classList.remove('visible');
      
      // Reset all Level 2 zones
      const level2Zones = document.querySelectorAll('.drop-zone.level-2-zone');
      level2Zones.forEach(zone => {
        zone.innerHTML = 'Drop Level 2 here';
        zone.classList.remove('filled', 'correct', 'incorrect');
      });

      // Reset all Level 3 zones (only first 3 columns, not examples)
      const columns = document.querySelectorAll('.wbs-column');
      for (let i = 0; i < 3; i++) {
        const level3Zones = columns[i].querySelectorAll('.level-3-drop-zone');
        level3Zones.forEach(zone => {
          zone.textContent = 'Drop task here';
          zone.classList.remove('filled', 'correct', 'incorrect');
        });
      }

      // Reset all owner inputs
      const ownerInputs = document.querySelectorAll('.owner-input');
      ownerInputs.forEach((input, index) => {
        // Only reset first 3 columns (not example columns)
        if (index < 3) {
          input.value = '';
          input.classList.remove('correct', 'incorrect');
        }
      });

      // Restore draggable items to sidebar
      const sourceItems = document.querySelector('.source-items');
      sourceItems.innerHTML = `
        <div class="source-title">Draggable Items</div>
        
        <div class="source-section">
          <div class="source-section-title">Level 2 Phases</div>
          <div class="wbs-box level-2 draggable-item" draggable="true" data-level="2">
            Project Initiation
          </div>
          <div class="wbs-box level-2 draggable-item" draggable="true" data-level="2">
            Planning
          </div>
          <div class="wbs-box level-2 draggable-item" draggable="true" data-level="2">
            Design
          </div>
        </div>

        <div class="source-section">
          <div class="source-section-title">Level 3 Tasks</div>
          
          <div class="level-3-task draggable-item" draggable="true" data-level="3">
            Create wireframes
          </div>
          <div class="level-3-task draggable-item" draggable="true" data-level="3">
            Develop project plan
          </div>
          <div class="level-3-task draggable-item" draggable="true" data-level="3">
            Design UI/UX
          </div>
          <div class="level-3-task draggable-item" draggable="true" data-level="3">
            Define project scope
          </div>
          <div class="level-3-task draggable-item" draggable="true" data-level="3">
            Create schedule
          </div>
          <div class="level-3-task draggable-item" draggable="true" data-level="3">
            Approve design
          </div>
          <div class="level-3-task draggable-item" draggable="true" data-level="3">
            Define requirements
          </div>
          <div class="level-3-task draggable-item" draggable="true" data-level="3">
            Create project charter
          </div>
          <div class="level-3-task draggable-item" draggable="true" data-level="3">
            Identify stakeholders
          </div>           
          <div class="level-3-task draggable-item" draggable="true" data-level="3">
            Resource planning
          </div>
        </div>
      `;

      // Reinitialize drag and drop
      initDragAndDrop();
    }

    function initDragAndDrop() {
      const draggableItems = document.querySelectorAll('.draggable-item');
      const dropZones = document.querySelectorAll('.drop-zone, .level-3-drop-zone');

      draggableItems.forEach(item => {
        item.addEventListener('dragstart', handleDragStart);
        item.addEventListener('dragend', handleDragEnd);
      });

      dropZones.forEach(zone => {
        zone.addEventListener('dragover', handleDragOver);
        zone.addEventListener('drop', handleDrop);
        zone.addEventListener('dragleave', handleDragLeave);
        zone.addEventListener('dragenter', handleDragEnter);
      });
    }

    function handleDragStart(e) {
      draggedItem = this;
      this.classList.add('dragging');
      e.dataTransfer.effectAllowed = 'move';
    }

    function handleDragEnd(e) {
      this.classList.remove('dragging');
      document.querySelectorAll('.drop-zone, .level-3-drop-zone').forEach(zone => {
        zone.classList.remove('drag-over');
      });
    }

    function handleDragOver(e) {
      e.preventDefault();
      e.dataTransfer.dropEffect = 'move';
      return false;
    }

    function handleDragEnter(e) {
      if (this.classList.contains('drop-zone') || this.classList.contains('level-3-drop-zone')) {
        this.classList.add('drag-over');
      }
    }

    function handleDragLeave(e) {
      if (e.target === this) {
        this.classList.remove('drag-over');
      }
    }

    function handleDrop(e) {
      e.preventDefault();
      e.stopPropagation();
      
      this.classList.remove('drag-over');
      
      if (draggedItem) {
        const draggedLevel = draggedItem.getAttribute('data-level');
        const zoneLevel = this.getAttribute('data-level');
        
        // Check if item level matches zone level
        if (draggedLevel === zoneLevel) {
          // Check if zone is already filled
          if (this.classList.contains('filled')) {
            return false; // Don't allow drop if already filled
          }
          
          if (draggedLevel === '2') {
            // For level 2 items, replace the drop zone
            this.innerHTML = '';
            this.appendChild(draggedItem);
            this.classList.add('filled');
            draggedItem.classList.remove('draggable-item');
            draggedItem.removeAttribute('draggable');
          } else if (draggedLevel === '3') {
            // For level 3 items, replace the placeholder text
            const taskText = draggedItem.textContent.trim();
            this.textContent = taskText;
            this.classList.add('filled');
            draggedItem.remove();
          }
        }
      }
      
      return false;
    }

    // Initialize on load
    initDragAndDrop();
  </script>
</body>
</html>